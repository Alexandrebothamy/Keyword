{extends file="admin-layout.tpl"}

{block name="check-resource"}admin.keyword{/block}
{block name="check-access"}view{/block}

{block name="page-title"}{intl l='View keyword associations'}{/block}

{block name="main-content"}
<div class="keyword view-keyword">
    <div id="wrapper" class="container">

        <ul class="breadcrumb">
            <li><a href="{url path='admin/home'}">{intl l="Home"}</a></li>
            <li><a href="{url path='admin/module/Keyword'}">{intl l="Keywords"}</a></li>
        </ul>

        <div class="row">
            {loop name="keyword" type="keyword" id="$keyword_id"}
            <div class="col-md-12 general-block-decorator">
                <div class="row">
                    <div class="col-md-7 title">
                        {intl l='View keyword "%title" associations' title=$TITLE}
                    </div>

                    <div class="col-md-5 actions">

                        {if $HAS_PREVIOUS != 0}
                        <a href="{url path="/admin/module/Keyword/view?keyword_id=$PREVIOUS"}" class="btn btn-default" title="{intl l='View previous keyword'}"><span class="glyphicon glyphicon-arrow-left"></span></a>
                        {else}
                        <a href="#" disabled="disabled" class="btn btn-default"><span class="glyphicon glyphicon-arrow-left"></span></a>
                        {/if}

                        {if $HAS_NEXT != 0}
                        <a href="{url path="/admin/module/Keyword/view?keyword_id=$NEXT"}" class="btn btn-default" title="{intl l='View next keyword'}"><span class="glyphicon glyphicon-arrow-right"></span></a>
                        {else}
                        <a href="#" disabled="disabled" class="btn btn-default"><span class="glyphicon glyphicon-arrow-right"></span></a>
                        {/if}
                    </div>
                </div>

                <div class="row">

                    <div class="col-md-12">
                        <ul class="nav nav-tabs" id="tabbed-menu">
                            <li class="active"><a href="#folder-association" data-toggle="tab">{intl l="Folder association"}</a></li>
                            <li><a href="#content-association" data-toggle="tab">{intl l="Content association"}</a></li>
                            <li><a href="#category-association" data-toggle="tab">{intl l="Category association"}</a></li>
                            <li><a href="#product-association" data-toggle="tab">{intl l="Product association"}</a></li>
                        </ul>

                        <div class="tab-content">

                            <div class="tab-pane fade active in" id="folder-association">

                                <table class="table table-striped table-condensed" id="folder_list">
                                    <caption>
                                        {intl l="Folders"}
                                    </caption>

                                    {ifloop rel="folder_list"}
                                    <thead>
                                    <tr>
                                        <th class="object-title">{intl l='ID'}</th>

                                        <th class="object-image">&nbsp;</th>

                                        <th class="object-title">{intl l='Folder title'}</th>

                                        {module_include location='folder_list_header'}

                                        <th class="actions">{intl l='Actions'}</th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    {loop name="folder_list" type="keyword_folder" keyword="$CODE" visible="*" backend_context="1" lang=$lang_id}
                                    <tr>
                                        <td>{$ID}</td>

                                        <td>
                                            {loop type="image" name="folder_image" source="folder" source_id="$ID" limit="1" width="50" height="50" resize_mode="crop" backend_context="1"}
                                            <a href="{url path='admin/folders' parent=$OBJECT_ID}" title="{intl l='Browse this folder'}"><img class="img-thumbnail" src="{$IMAGE_URL}" alt="{$TITLE}" /></a>
                                            {/loop}
                                        </td>

                                        <td class="object-title">
                                            <a href="{url path='admin/folders' parent=$ID}" title="{intl l='Browse this folder'}">
                                                {$TITLE}
                                            </a>
                                        </td>

                                        {module_include location='folder_list_row'}

                                        <td class="actions">
                                            <div class="btn-group">
                                                <a class="btn btn-default btn-xs" title="{intl l='Browse this folder'}" href="{url path='admin/folders' parent=$ID}"><i class="glyphicon glyphicon-folder-open"></i></a>

                                                {loop type="auth" name="can_change" role="ADMIN" resource="admin.folder" access="UPDATE"}
                                                <a class="btn btn-default btn-xs" title="{intl l='Edit this folder'}" href="{url path="/admin/folders/update/{$ID}"}"><i class="glyphicon glyphicon-edit"></i></a>
                                                {/loop}

                                            </div>
                                        </td>
                                    </tr>
                                    {/loop}
                                    </tbody>
                                    {/ifloop}

                                    {elseloop rel="folder_list"}
                                    <thead>
                                    <tr>
                                        <td class="message">
                                            <div class="alert alert-info">
                                                {intl l="This keyword has no folder assocation."}
                                            </div>
                                        </td>
                                    </tr>
                                    </thead>
                                    {/elseloop}
                                </table>

                            </div>

                            <div class="tab-pane fade" id="content-association">

                                <table class="table table-striped table-condensed" id="content_list">
                                    <caption>
                                        {intl l="Contents"}
                                    </caption>

                                    {ifloop rel="content_list"}
                                    <thead>
                                    <tr>
                                        <th class="object-title">{intl l='ID'}</th>

                                        <th class="object-image">&nbsp;</th>

                                        <th class="object-title">{intl l='Content title'}</th>

                                        {module_include location='content_list_header'}

                                        <th class="actions">{intl l='Actions'}</th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    {loop name="content_list" type="keyword_content" keyword="$CODE" visible="*" backend_context="1" lang=$lang_id}
                                    <tr>
                                        <td>{$ID}</td>

                                        <td>
                                            {loop type="image" name="folder_image" source="content" source_id="$ID" limit="1" width="50" height="50" resize_mode="crop" backend_context="1"}
                                            <a href="{url path="admin/content/update/$OBJECT_ID"}" title="{intl l='Edit this content'}">
                                            <img src="{$IMAGE_URL}" alt="{$TITLE}" />
                                            </a>
                                            {/loop}
                                        </td>

                                        <td class="object-title"><a href="{url path="/admin/content/update/$ID"}" title="{intl l='Edit this content'}">{$TITLE}</a></td>

                                        {module_include location='content_list_row'}

                                        <td class="actions">
                                            <div class="btn-group">
                                                {loop type="auth" name="can_change" role="ADMIN" resource="admin.content" access="UPDATE"}
                                                <a class="btn btn-default btn-xs" title="{intl l='Edit this content'}" href="{url path="admin/content/update/$ID"}"><i class="glyphicon glyphicon-edit"></i></a>
                                                {/loop}
                                            </div>
                                        </td>
                                    </tr>
                                    {/loop}
                                    </tbody>
                                    {/ifloop}

                                    {elseloop rel="content_list"}
                                    <thead>
                                    <tr>
                                        <td class="message">
                                            <div class="alert alert-info">
                                                {intl l="This keyword has no content assocation."}
                                            </div>
                                        </td>
                                    </tr>
                                    </thead>
                                    {/elseloop}
                                </table>

                            </div>

                            <div class="tab-pane fade" id="category-association">

                                <table class="table table-striped table-condensed" id="category_list">
                                    <caption>
                                        {intl l="Categories"}
                                    </caption>

                                    {ifloop rel="category_list"}
                                    <thead>
                                    <tr>
                                        <th class="object-title">{intl l='ID'}</th>

                                        <th class="object-image">&nbsp;</th>

                                        <th class="object-title">{intl l='Category title'}</th>

                                        {module_include location='category_list_header'}

                                        <th class="actions">{intl l='Actions'}</th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    {loop name="category_list" type="keyword_category" keyword="$CODE" visible="*" backend_context="1" lang=$lang_id}
                                    <tr>
                                        <td>{$ID}</td>

                                        <td>
                                            {loop type="image" name="category_image" source="category" source_id="$ID" limit="1" width="50" height="50" resize_mode="crop" backend_context="1"}
                                            <a href="{url path='admin/categories' parent=$OBJECT_ID}" title="{intl l='Browse this category'}"><img class="img-thumbnail" src="{$IMAGE_URL}" alt="{$TITLE}" /></a>
                                            {/loop}
                                        </td>

                                        <td class="object-title">
                                            <a href="{url path='admin/categories' parent=$ID}" title="{intl l='Browse this category'}">
                                                {$TITLE}
                                            </a>
                                        </td>

                                        {module_include location='category_list_row'}

                                        <td class="actions">
                                            <div class="btn-group">
                                                <a class="btn btn-default btn-xs" title="{intl l='Browse this category'}" href="{url path='admin/categories' parent=$ID}"><i class="glyphicon glyphicon-folder-open"></i></a>

                                                {loop type="auth" name="can_change" role="ADMIN" resource="admin.category" access="UPDATE"}
                                                <a class="btn btn-default btn-xs" title="{intl l='Edit this category'}" href="{url path="/admin/categories/update/{$ID}"}"><i class="glyphicon glyphicon-edit"></i></a>
                                                {/loop}

                                            </div>
                                        </td>
                                    </tr>
                                    {/loop}
                                    </tbody>
                                    {/ifloop}

                                    {elseloop rel="category_list"}
                                    <thead>
                                    <tr>
                                        <td class="message">
                                            <div class="alert alert-info">
                                                {intl l="This keyword has no category assocation."}
                                            </div>
                                        </td>
                                    </tr>
                                    </thead>
                                    {/elseloop}
                                </table>

                            </div>

                            <div class="tab-pane fade" id="product-association">

                                <table class="table table-striped table-condensed" id="product_list">
                                    <caption>
                                        {intl l="Products"}
                                    </caption>

                                    {ifloop rel="product_list"}
                                    <thead>
                                    <tr>
                                        <th class="object-title">{intl l='ID'}</th>

                                        <th class="object-image">&nbsp;</th>

                                        <th class="object-title">{intl l='Product title'}</th>

                                        {module_include location='product_list_header'}

                                        <th class="actions">{intl l='Actions'}</th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    {loop name="product_list" type="keyword_product" keyword="$CODE" visible="*" backend_context="1" lang=$lang_id}
                                    <tr>
                                        <td>{$ID}</td>

                                        <td>
                                            {loop type="image" name="product_image" source="product" source_id="$ID" limit="1" width="50" height="50" resize_mode="crop" backend_context="1"}
                                            <a href="{url path="admin/products/update" product_id=$OBJECT_ID}" title="{intl l='Edit this product'}">
                                            <img src="{$IMAGE_URL}" alt="{$TITLE}" />
                                            </a>
                                            {/loop}
                                        </td>

                                        <td class="object-title"><a href="{url path="/admin/products/update" product_id=$ID}" title="{intl l='Edit this product'}">{$TITLE}</a></td>

                                        {module_include location='product_list_row'}

                                        <td class="actions">
                                            <div class="btn-group">
                                                {loop type="auth" name="can_change" role="ADMIN" resource="admin.product" access="UPDATE"}
                                                <a class="btn btn-default btn-xs" title="{intl l='Edit this product'}" href="{url path="admin/products/update" product_id=$ID}"><i class="glyphicon glyphicon-edit"></i></a>
                                                {/loop}
                                            </div>
                                        </td>
                                    </tr>
                                    {/loop}
                                    </tbody>
                                    {/ifloop}

                                    {elseloop rel="product_list"}
                                    <thead>
                                    <tr>
                                        <td class="message">
                                            <div class="alert alert-info">
                                                {intl l="This keyword has no product assocation."}
                                            </div>
                                        </td>
                                    </tr>
                                    </thead>
                                    {/elseloop}
                                </table>

                            </div>

                        </div>

                    </div>

                </div>

            </div>
            {/loop}
        </div>
    </div>
</div>
{/block}